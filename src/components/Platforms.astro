---
import PushNotificationButton from './PushNotificationButton';
import starpodConfig from '../../starpod.config';
import { getShowInfo } from '../lib/rss';

const { platforms } = starpodConfig;

const show = await getShowInfo();
---

<h3 class="section-heading hidden pt-12 pb-6 lg:block">Listen</h3>

<div
  class="mt-16 flex items-center justify-center gap-6 lg:mt-0 lg:justify-start"
>
  <PushNotificationButton client:only="preact" showTitle={show.title} />
  {
    platforms?.spotify && (
      <a
        class="gradient-icon spotify h-6 w-6"
        href={platforms.spotify}
        aria-label={`Listen to ${show.title} on Spotify.`}
      />
    )
  }
  {
    platforms?.apple && (
      <a
        class="gradient-icon apple h-6 w-6"
        href={platforms.apple}
        aria-label={`Listen to ${show.title} on Apple Podcasts.`}
      />
    )
  }
  {
    platforms?.overcast && (
      <a
        class="gradient-icon overcast h-6 w-6"
        href={platforms.overcast}
        aria-label={`Listen to ${show.title} on Overcast.`}
      />
    )
  }
  {
    platforms?.pocketCasts && (
      <a
        class="gradient-icon pocket-casts h-6 w-6"
        href={platforms.pocketCasts}
        aria-label={`Listen to ${show.title} on Pocket Casts.`}
      />
    )
  }
  {
    platforms?.youtube && (
      <a
        class="gradient-icon youtube h-7 w-7"
        href={platforms.youtube}
        aria-label={`Watch ${show.title} on YouTube.`}
      />
    )
  }
</div>

<style>
  .apple {
    mask-image: url(/images/apple.svg);
  }

  .overcast {
    mask-image: url(/images/overcast.svg);
  }
  .pocket-casts {
    mask-image: url(/images/pocket-casts.svg);
  }

  .spotify {
    mask-image: url(/images/spotify.svg);
  }

  .youtube {
    mask-image: url(/images/youtube.svg);
  }
</style>
